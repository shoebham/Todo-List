(()=>{"use strict";class e{constructor(e,t,n,l){this.title=e,this.desc=t,this.due=n,this.prior=l}setPriority(e){this.prior=e}getPriority(){return this.prior}setTitle(e){this.title=e}getTitle(){return this.title}setDesc(e){this.desc=e}getDesc(){return this.desc}setDue(e){this.due=e}getDue(){return this.due}}let t=new Set,n=new Set;function l(e){let l=document.createElement("li"),o=document.createElement("input"),d=document.createElement("label"),i=document.createElement("span");return o.type="checkbox",l.style="list-style-type: none",l.className="projectItem",i.textContent=e.getTitle(),o.addEventListener("change",(()=>{i.classList.toggle("completed")})),d.appendChild(o),d.appendChild(i),l.appendChild(d),l.appendChild(c(l)),l.appendChild(function(e){let l=document.createElement("button");return l.textContent="EDIT",l.className="edit",l.addEventListener("click",(()=>{console.log("Editing",e.childNodes[0].textContent);let o=document.createElement("input");o.type="text";let c=e.childNodes[0].textContent;o.value=c,e.replaceChild(o,e.childNodes[0]);let d=document.createElement("button");d.textContent="Done",d.className="done",d.addEventListener("click",(()=>{let i=o.value,a=document.createElement("input");a.type="checkbox";let s=document.createElement("label");s.appendChild(a);let u=document.createElement("span");u.textContent=i,a.addEventListener("change",(()=>{u.classList.toggle("completed")})),s.appendChild(u),e.replaceChild(s,o),e.replaceChild(l,d),function(e,l){let o;t.forEach((n=>{o=r(e,n.getList()),null!=o&&o.setTitle(l),console.log("List of project tasks after editing",t)})),null==o&&(r(e,n).setTitle(l),console.log("List of individual tasks after editing",n))}(c,i)})),e.replaceChild(d,l)})),l}(l)),l}function o(e){console.log("in setup",a(e));let t=function(){let e=document.createElement("div");return e.className="todo",e}(),n=function(e){let t=a(e),n=document.createElement("ul");n.id=t.getTitle(),n.className="project-ul";let o=document.createElement("span");return o.textContent=t.getTitle(),o.className="project-span",n.appendChild(o),n.appendChild(c(n)),t.getList().forEach((e=>{let o=l(e);o.classList.add("projectItem"),o.classList.add(t.getTitle()),n.appendChild(o)})),n}(e);return t.appendChild(n),t.appendChild(d()),t}function c(e){let n=document.createElement("button");return n.textContent="DELETE",n.className="delete",n.addEventListener("click",(()=>{!function(e){e.classList.contains("projectItem")?function(e){console.log(e);let t=e.childNodes[0].textContent,n=e.classList[1],l=a(n);console.log("deleting from project",t,n),l.removeItem(r(t,l.getList())),e.remove()}(e):function(e){console.log(e.childNodes[0].textContent);let n=e.childNodes[0].textContent,l=a(n);t.delete(l),e.remove(),document.getElementById(n+"-Button").remove(),document.getElementsByClassName("add")[0].remove(),0==l.getList().size&&document.querySelector(".todo").replaceWith(i())}(e)}(e)})),n}function d(){let o=document.createElement("button");return o.textContent="Add Task",o.className="add",o.addEventListener("click",(()=>{o.replaceWith(function(){let o=document.createElement("div");o.className="inputDiv";let c=document.createElement("input");c.className="inputTask",c.type="text",c.placeholder="Enter new task";let i=document.createElement("button");i.textContent="Add",i.className="add";let s=document.createElement("button");s.textContent="cancel",s.className="cancel",s.addEventListener("click",(()=>{o.replaceWith(d())}));let u=function(){let e=document.createElement("select");e.className="projectDropdown";let n=document.createElement("option");return n.textContent="--",e.appendChild(n),t.forEach((t=>{let n=document.createElement("option");n.textContent=t.getTitle(),e.appendChild(n)})),e.value=document.querySelector(".todo").childNodes[0].id,e}(),m=u.value;return u.addEventListener("change",(()=>{m=u.value,console.log(m)})),console.log("project List before adding ",t),console.log(m),i.addEventListener("click",(()=>{let o=c.value;if(null==r(o,a(m).getList())&&""!=o){let c=new e(o,1,2,3),i=l(c);if("--"==m)n.add(c),document.querySelector(".inputDiv").remove(),document.querySelector(".todo").appendChild(d());else{console.log("in else ",t);let e=a(m);console.log("216",t),e.addItem(c),console.log("217",t),function(e,t){document.querySelector(".inputDiv").remove(),document.querySelector(".todo").appendChild(d()),document.getElementById(t).appendChild(e),document.querySelectorAll(".projectItem").forEach((e=>e.classList.add(t)))}(i,e.getTitle())}console.log("project List after adding ",t)}else""==o?alert("Task cannot be empty"):alert("Task already exists")})),o.appendChild(c),o.appendChild(u),o.appendChild(i),o.appendChild(s),o}())})),o}function i(){let e=document.createElement("div");return e.innerHTML="<h4>It's empty here!!<br>Create a new project and add tasks in it</h4>",e.className="blankScreen",e}function a(e){let n;return t.forEach((t=>{t.getTitle()==e&&(n=t)})),n}function r(e,t){let n;return t.forEach((t=>{t.getTitle()==e&&(n=t)})),n}class s{list_of_todo=new Set;constructor(e){this.project_name=e}addItem(e){this.list_of_todo.add(e)}removeItem(e){console.log("Before removing",this.list_of_todo),this.list_of_todo.delete(e),console.log("After removing",this.list_of_todo)}getItem(e){return this.list_of_todo[this.list_of_todo.indexOf(e)]}deleteProject(){this.list_of_todo=[],console.log(this.project_name+" deleted")}getTitle(){return this.project_name}getList(){return this.list_of_todo}}function u(){let e=document.createElement("button");return e.textContent="Add Project",e.id="addProject",e.addEventListener("click",(()=>{e.replaceWith(function(){let e=document.createElement("div");e.id="inputProjectDiv";let n=document.createElement("input");n.className="inputProject",n.type="text",n.placeholder="Enter new Project Name";let l=document.createElement("button");l.textContent="Add",l.className="add";let o=document.createElement("button");return o.textContent="cancel",o.className="cancel",o.addEventListener("click",(()=>{e.replaceWith(u())})),l.addEventListener("click",(()=>{let e=n.value;""==e?alert("Please enter a project name"):t.has(a(e))?alert("Project already exists"):(e=new s(n.value),console.log(e),t.add(e),function(e){let t=document.createElement("button");t.textContent=e,t.id=e+"-Button",t.className="project-button",t.addEventListener("click",(()=>{m(e)})),document.getElementById("inputProjectDiv").remove(),document.getElementById("side-bar").appendChild(t),document.getElementById("side-bar").appendChild(u())}(e.getTitle()),m(e.getTitle()))})),e.appendChild(n),e.appendChild(l),e.appendChild(o),e}())})),e}function m(e){let t=document.querySelector(".todo");document.querySelector(".blankScreen")&&document.getElementById("content").removeChild(document.querySelector(".blankScreen")),t?document.getElementById("content").replaceChild(o(e),document.querySelector(".todo")):document.getElementById("content").appendChild(o(e))}!function(){document.body.insertBefore(function(){let e=document.createElement("div");return e.className="header",e.innerHTML="<h1>To-Do List</h1>",e}(),document.getElementById("content"));let e=document.getElementById("content");e.appendChild(function(){let e=document.createElement("div");return e.id="side-bar",e.innerHTML="<center><h2>Projects</h2></center>",e.appendChild(u()),e}()),e.appendChild(i())}()})();