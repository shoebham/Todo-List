(()=>{"use strict";class e{constructor(e,t,n,o){this.title=e,this.desc=t,this.due=n,this.prior=o}setPriority(e){this.prior=e}getPriority(){return this.prior}setTitle(e){this.title=e}getTitle(){return this.title}setDesc(e){this.desc=e}getDesc(){return this.desc}setDue(e){this.due=e}getDue(){return this.due}}let t=new Set,n=new Set;function o(e){let o=document.createElement("li"),l=document.createElement("input"),c=document.createElement("label"),i=document.createElement("span");return l.type="checkbox",o.style="list-style-type: none",i.textContent=e.getTitle(),l.addEventListener("change",(()=>{i.classList.toggle("completed")})),c.appendChild(l),c.appendChild(i),o.appendChild(c),o.appendChild(d(o)),o.appendChild(function(e){let o=document.createElement("button");return o.textContent="EDIT",o.className="edit",o.addEventListener("click",(()=>{console.log("Editing",e.childNodes[0].textContent);let l=document.createElement("input");l.type="text";let d=e.childNodes[0].textContent;l.value=d,e.replaceChild(l,e.childNodes[0]);let c=document.createElement("button");c.textContent="Done",c.className="done",c.addEventListener("click",(()=>{let i=l.value,a=document.createElement("input");a.type="checkbox";let s=document.createElement("label");s.appendChild(a);let u=document.createElement("span");u.textContent=i,a.addEventListener("change",(()=>{u.classList.toggle("completed")})),s.appendChild(u),e.replaceChild(s,l),e.replaceChild(o,c),function(e,o){let l;t.forEach((n=>{l=r(e,n.getList()),null!=l&&l.setTitle(o),console.log("List of project tasks after editing",t)})),null==l&&(r(e,n).setTitle(o),console.log("List of individual tasks after editing",n))}(d,i)})),e.replaceChild(c,o)})),o}(o)),o}function l(e){console.log("in setup",i(e));let t=function(){let e=document.createElement("div");return e.className="todo",e}(),n=function(e){let t=i(e),n=document.createElement("ul");return n.id=t.getTitle(),n.className="project",n.textContent=t.getTitle(),n.appendChild(d(n)),t.getList().forEach((e=>{let l=o(e);l.classList.add("projectItem"),l.classList.add(t.getTitle()),n.appendChild(l)})),n}(e);return t.appendChild(n),t.appendChild(c()),t}function d(e){let n=document.createElement("button");return n.textContent="DELETE",n.className="delete",n.addEventListener("click",(()=>{!function(e){e.classList.contains("projectItem")?function(e){let t=e.childNodes[0].textContent,n=i(e.classList[1]);n.removeItem(r(t,n.getList()))}(e):function(e){let n=e.childNodes[0].textContent,o=i(n);t.delete(o),e.remove(),document.getElementById(n+"-Button").remove(),document.getElementsByClassName("add")[0].remove()}(e)}(e)})),n}function c(){let l=document.createElement("button");return l.textContent="Add Task",l.className="add",l.addEventListener("click",(()=>{l.replaceWith(function(){let l=document.createElement("div");l.className="inputDiv";let d=document.createElement("input");d.className="inputTask",d.type="text",d.placeholder="Enter new task";let r=document.createElement("button");r.textContent="Add",r.className="add";let a=function(){let e=document.createElement("select");e.className="projectDropdown";let n=document.createElement("option");return n.textContent="--",e.appendChild(n),t.forEach((t=>{let n=document.createElement("option");n.textContent=t.getTitle(),e.appendChild(n)})),e.value=document.querySelector(".todo").childNodes[0].id,e}(),s=a.value;return a.addEventListener("change",(()=>{s=a.value,console.log(s)})),console.log("project List before adding ",t),console.log(s),r.addEventListener("click",(()=>{let l=d.value,r=new e(l,1,2,3),a=o(r);if("--"==s)n.add(r),document.querySelector(".inputDiv").remove(),document.querySelector(".todo").appendChild(c());else{console.log("in else ",t);let e=i(s);console.log("216",t),e.addItem(r),console.log("217",t),function(e,t){document.querySelector(".inputDiv").remove(),document.querySelector(".todo").appendChild(c()),console.log("error is here",e,t),document.getElementById(t).appendChild(e)}(a,e.getTitle())}console.log("project List after adding ",t)})),l.appendChild(d),l.appendChild(a),l.appendChild(r),l}())})),l}function i(e){let n;return t.forEach((t=>{t.getTitle()==e&&(n=t)})),n}function r(e,t){let n;return t.forEach((t=>{t.getTitle()==e&&(n=t)})),n}class a{list_of_todo=new Set;constructor(e){this.project_name=e}addItem(e){this.list_of_todo.add(e)}removeItem(e){console.log("Before removing",this.list_of_todo),this.list_of_todo.delete(e),console.log("After removing",this.list_of_todo)}getItem(e){return this.list_of_todo[this.list_of_todo.indexOf(e)]}deleteProject(){this.list_of_todo=[],console.log(this.project_name+" deleted")}getTitle(){return this.project_name}getList(){return this.list_of_todo}}function s(){let e=document.createElement("button");return e.textContent="Add Project",e.classList.add("add"),e.id="addProject",e.addEventListener("click",(()=>{e.replaceWith(function(){let e=document.createElement("div");e.id="inputProjectDiv";let n=document.createElement("input");n.className="inputProject",n.type="text",n.placeholder="Enter new Project Name";let o=document.createElement("button");return o.textContent="Add",o.className="add",o.addEventListener("click",(()=>{let e=n.value;""==e?alert("Please enter a project name"):t.has(i(e))?alert("Project already exists"):(e=new a(n.value),console.log(e),t.add(e),function(e){let t=document.createElement("button");t.textContent=e,t.id=e+"-Button",t.className="project-button",t.addEventListener("click",(()=>{!function(e){let t=document.querySelector(".todo");console.log(t),t?document.getElementById("content").replaceChild(l(e),document.querySelector(".todo")):document.getElementById("content").appendChild(l(e))}(e)})),document.getElementById("inputProjectDiv").remove(),document.getElementById("side-bar").appendChild(t),document.getElementById("side-bar").appendChild(s())}(e.getTitle()))})),e.appendChild(n),e.appendChild(o),e}())})),e}document.getElementById("content").appendChild(function(){let e=document.createElement("div");return e.id="side-bar",e.innerHTML="<center><h2>Projects</h2></center>",e.appendChild(s()),e}())})();